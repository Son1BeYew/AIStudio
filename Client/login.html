<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ƒêƒÉng Nh·∫≠p | ArtifyAI Clone</title>
    <link rel="stylesheet" href="assets/css/styles.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }

      .login-container {
        max-width: 400px;
        width: 100%;
      }

      .login-box {
        background: #fff;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .login-box h2 {
        margin-bottom: 5px;
      }

      .subtitle {
        margin-bottom: 20px;
        color: #777;
      }

      .input-group {
        margin-bottom: 15px;
      }

      .input-group label {
        display: block;
        margin-bottom: 6px;
        font-size: 14px;
      }

      .input-group input {
        width: 100%;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }

      .primary2 {
        background: #4f46e5;
        color: white;
        border: none;
        padding: 10px;
        border-radius: 6px;
        cursor: pointer;
        width: 100%;
        margin-bottom: 15px;
        transition: background 0.4s ease;
      }

      .primary2:hover {
        background: #3730a3;
      }

      .alt {
        text-align: center;
        margin-top: 10px;
      }

      .social-login {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 10px;
      }

      .btn-social {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background-color: #4285f4;
        color: white;
        border: none;
        border-radius: 8px;
        padding: 10px 20px;
        font-size: 15px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.4s ease;
      }

      .btn-google:hover {
        background: #bc130d;
      }

      .btn-google {
        background: #e81703;
        color: white;
      }

      .btn-facebook {
        background: #1877f2;
        color: white;
      }

      .btn-social svg {
        width: 20px;
        height: 20px;
        background: white;
        border-radius: 50%;
        padding: 2px;
      }
    </style>
  </head>

  <body>
    <div class="login-container">
      <div class="login-box">
        <h2>ƒêƒÉng Nh·∫≠p</h2>

        <form id="loginForm">
          <div class="input-group">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              placeholder="Nh·∫≠p email c·ªßa b·∫°n"
              required
            />
          </div>

          <div class="input-group">
            <label for="password">M·∫≠t kh·∫©u</label>
            <input
              type="password"
              id="password"
              placeholder="Nh·∫≠p m·∫≠t kh·∫©u"
              required
            />
          </div>

          <button type="submit" class="primary2">ƒêƒÉng Nh·∫≠p</button>
          <p class="alt">Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#">ƒêƒÉng k√Ω ngay</a></p>
        </form>

        <div class="social-login">
          <button
            class="btn-social btn-google"
            onclick="window.location.href='http://localhost:5000/auth/google'"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 48 48"
              width="24"
              height="24"
            >
              <path
                fill="#EA4335"
                d="M24 9.5c3.94 0 6.63 1.7 8.15 3.12l5.92-5.77C34.35 3.24 29.55 1 24 1 14.65 1 7.01 6.82 3.69 14.77l6.98 5.43C12.11 13.15 17.59 9.5 24 9.5z"
              />
              <path
                fill="#34A853"
                d="M46.5 24.5c0-1.59-.14-3.1-.41-4.5H24v8.5h12.65c-.55 2.9-2.18 5.36-4.65 7.03l7.27 5.65c4.26-3.94 6.73-9.76 6.73-16.68z"
              />
              <path
                fill="#FBBC05"
                d="M10.67 28.73A14.45 14.45 0 0 1 9.5 24c0-1.64.29-3.23.82-4.73l-6.98-5.43A23.96 23.96 0 0 0 1 24c0 3.87.92 7.53 2.54 10.79l7.13-6.06z"
              />
              <path
                fill="#4285F4"
                d="M24 47c6.55 0 12.04-2.17 16.05-5.89l-7.27-5.65C30.83 37.58 27.72 38.5 24 38.5c-6.41 0-11.89-3.65-14.33-8.77l-7.13 6.06C7.01 41.18 14.65 47 24 47z"
              />
            </svg>
            <span>ƒêƒÉng nh·∫≠p v·ªõi Google</span>
          </button>
        </div>
      </div>
    </div>

    <script>
      const form = document.getElementById("loginForm");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        try {
          const res = await fetch("http://localhost:5000/auth/login", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, password }),
          });

          const data = await res.json();

          if (data.token) {
            localStorage.setItem("token", data.token);
            alert("ƒêƒÉng nh·∫≠p th√†nh c√¥ng üéâ");
            window.location.href = "/Client/dashboard.html";
          } else {
            alert(data.error || "ƒêƒÉng nh·∫≠p th·∫•t b·∫°i");
          }
        } catch (err) {
          alert("C√≥ l·ªói x·∫£y ra: " + err.message);
        }
      });

      // Google callback redirect v·ªÅ v·ªõi ?token
      const params = new URLSearchParams(window.location.search);
      if (params.get("token")) {
        localStorage.setItem("token", params.get("token"));
        window.location.href = "/Client/dashboard.html";
      }
    </script>
  </body>
</html>
