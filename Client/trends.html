<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Xu H∆∞·ªõng | EternaPicSHT AI</title>
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link rel="stylesheet" href="/assets/css/header.css" />
  <link rel="stylesheet" href="/assets/css/footer.css" />
  <link rel="stylesheet" href="/assets/css/trends.css" />
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div id="header"></div>

  <div class="trends-container">
    <section class="trends-hero">
      <h1>XU H∆Ø·ªöNG C√îNG NGH·ªÜ AI</h1>
      <p>Kh√°m ph√° nh·ªØng phong c√°ch t·∫°o ·∫£nh m·ªõi nh·∫•t tr√™n EternaPicSHT</p>
    </section>

    <section class="popular-trends">
      <div class="section-header">
        <h2>Xu h∆∞·ªõng ph·ªï bi·∫øn hi·ªán nay</h2>
        <p>Nh·ªØng phong c√°ch ·∫£nh n·ªïi b·∫≠t</p>
      </div>
      <div class="trends-grid">
        <div class="trend-card" style="background-color: #f5f5f7;">
          <div class="trend-image"></div>
          <h3>Cyberpunk neon</h3>
          <p>Phong c√°ch t∆∞∆°ng lai ƒë·∫ßy m√†u s·∫Øc neon, b√≥ng ƒë√™m k·ªπ thu·∫≠t s·ªë</p>
        </div>

        <div class="trend-card" style="background-color: #f5f5f7;">
          <div class="trend-image"></div>
          <h3>Thi√™n nhi√™n xanh</h3>
          <p>H√≤a nh·∫≠p t·ª± nhi√™n, c·∫£nh r·ª´ng s√¢u v√† ƒë·ªông v·∫≠t hoang d√£</p>
        </div>

        <div class="trend-card" style="background-color: #f5f5f7;">
          <div class="trend-image"></div>
          <h3>Phim ho·∫°t h√¨nh 3d</h3>
          <p>Style disney/pixar, nh√¢n v·∫≠t ho·∫°t h√¨nh si√™u chi ti·∫øt</p>
        </div>

        <div class="trend-card" style="background-color: #f5f5f7;">
          <div class="trend-image"></div>
          <h3>Fantasy magic</h3>
          <p>Th·∫ø gi·ªõi ph√©p thu·∫≠t, r·ªìng, y√™u tinh v√† ph√©p l·∫°</p>
        </div>

        <div class="trend-card" style="background-color: #f5f5f7;">
          <div class="trend-image"></div>
          <h3>Retro vintage</h3>
          <p>Phong c√°ch 70s, 80s retro, film c≈© v√† b·ªô m√°y quay vintage</p>
        </div>

        <div class="trend-card" style="background-color: #f5f5f7;">
          <div class="trend-image"></div>
          <h3>Pop art modern</h3>
          <p>Ngh·ªá thu·∫≠t hi·ªán ƒë·∫°i, warhol style, m√†u s·∫Øc ƒë·∫≠p m·∫Øt</p>
        </div>
      </div>
    </section>

    <section class="trends-cta">
      <h2>B·∫°n ƒë√£ s·∫µn s√†ng t·∫°o ·∫£nh theo xu h∆∞·ªõng?</h2>
      <p>Th·ª≠ c√°c phong c√°ch m·ªõi nh·∫•t c·ªßa ch√∫ng t√¥i</p>
      <button class="btn-primary" onclick="window.location.href='/tao-anh.html'">
        B·∫Øt ƒë·∫ßu t·∫°o ·∫£nh
      </button>
    </section>
  </div>

  <div id="footer"></div>

  <script src="/assets/js/auth-utils.js"></script>
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/floating-chat-loader.js"></script>
</body>

</html>
<script>
  // API calls ƒë·ªÉ l·∫•y d·ªØ li·ªáu th·∫≠t
  const API_BASE = "/api/trends";
  // ƒê·ªãnh d·∫°ng th·ªùi gian
  function formatTimeAgo(date) {
    const now = new Date();
    const diffMs = now - new Date(date);
    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
    const diffDays = Math.floor(diffHours / 24);

    if (diffDays === 0) {
      if (diffHours === 0) return "V·ª´a xong";
      return `${diffHours} gi·ªù tr∆∞·ªõc`;
    } else if (diffDays === 1) {
      return "H√¥m qua";
    } else if (diffDays <= 7) {
      return `${diffDays} ng√†y tr∆∞·ªõc`;
    } else {
      return new Date(date).toLocaleDateString("vi-VN");
    }
  }

  // T·∫£i d·ªØ li·ªáu xu h∆∞·ªõng ph·ªï bi·∫øn
  async function loadPopularTrends() {
    console.log("üîÑ Loading popular trends...");
    try {
      const response = await fetch(`${API_BASE}/popular`);
      console.log("üì° API Response status:", response.status);

      if (!response.ok) throw new Error("Failed to load trends");

      const trends = await response.json();
      console.log("üìä Popular trends data:", trends);

      const trendsGrid = document.querySelector(".trends-grid");
      console.log("üéØ Trends grid element:", trendsGrid);

      // Clear existing mock data
      trendsGrid.innerHTML = "";
      trends.forEach((trend, index) => {
        const trendCard = document.createElement("div");
        trendCard.className = "trend-card";
        trendCard.innerHTML = `
              <div class="trend-image" style="${trend.image
            ? `background-image: url('${trend.image}')`
            : `background: linear-gradient(135deg, #${Math.floor(
              Math.random() * 16777215
            ).toString(16)}, #${Math.floor(
              Math.random() * 16777215
            ).toString(16)})`
          }"></div>
              <h3>${trend.title}</h3>
              <p>${trend.description || "Style ·∫£nh ƒë·ªôc ƒë√°o v√† s√°ng t·∫°o"}</p>
            `;
        trendsGrid.appendChild(trendCard);
      });
    } catch (error) {
      console.error("Error loading popular trends:", error);
      // Gi·ªØ mock data n·∫øu API th·∫•t b·∫°i
    }
  }

  // Th√™m loading states
  function showLoading() {
    const loadingElements = document.querySelectorAll(
      ".trends-grid, .highlights-grid, .stats-grid"
    );
    loadingElements.forEach((el) => {
      el.style.opacity = "1";
      el.style.pointerEvents = "none";
    });
  }

  function hideLoading() {
    const loadingElements = document.querySelectorAll(
      ".trends-grid, .highlights-grid, .stats-grid"
    );
    loadingElements.forEach((el) => {
      el.style.opacity = "1";
      el.style.pointerEvents = "auto";
    });
  }

  // Kh·ªüi t·∫°o khi DOM load xong
  document.addEventListener("DOMContentLoaded", async function () {
    showLoading();

    // T·∫£i d·ªØ li·ªáu th·∫≠t t·ª´ API
    await Promise.all([loadPopularTrends(), loadTrendsStats()]);

    hideLoading();
    document.body.appendChild(refreshBtn);
  });
</script>
</body>

</html> 