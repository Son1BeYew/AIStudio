<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Xu h∆∞·ªõng | EternaPicSHT AI</title>
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link rel="stylesheet" href="/assets/css/header.css" />
  <link rel="stylesheet" href="/assets/css/footer.css" />
  <link rel="stylesheet" href="/assets/css/trends.css" />
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div id="header"></div>

  <div class="trends-container">
    <!-- Hero Section -->
    <section class="trends-hero">
      <h1>Xu H∆∞·ªõng C√¥ng Ngh·ªá AI</h1>
      <p>Kh√°m ph√° nh·ªØng tr√†o l∆∞u t·∫°o ·∫£nh m·ªõi nh·∫•t tr√™n EternaPicSHT</p>
    </section>

    <!-- Popular Trends -->
    <section class="popular-trends">
      <div class="section-header">
        <h2>Xu H∆∞·ªõng Ph·ªï Bi·∫øn Hi·ªán Nay</h2>
        <p>Nh·ªØng style ·∫£nh ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t trong tu·∫ßn qua</p>
      </div>
      <div class="trends-grid">
        <div class="trend-card">
          <div class="trend-rank">1</div>
          <div class="trend-image" style="background: linear-gradient(135deg, #ff6b6b, #ff8e72)"></div>
          <h3>Cyberpunk Neon</h3>
          <p>Phong c√°ch t∆∞∆°ng lai ƒë·∫ßy m√†u s·∫Øc neon, b√≥ng ƒë√™m k·ªπ thu·∫≠t s·ªë</p>
          <div class="trend-stats">
            <span class="stat">üë• 15.2K l·∫ßn t·∫°o</span>
            <span class="stat">‚ù§Ô∏è 4.8/5 ‚≠ê</span>
          </div>
        </div>

        <div class="trend-card">
          <div class="trend-rank">2</div>
          <div class="trend-image" style="background: linear-gradient(135deg, #4ecdc4, #44a08d)"></div>
          <h3>Thi√™n Nhi√™n Xanh</h3>
          <p>H√≤a nh·∫≠p t·ª± nhi√™n, c·∫£nh r·ª´ng s√¢u v√† ƒë·ªông v·∫≠t hoang d√£</p>
          <div class="trend-stats">
            <span class="stat">üë• 12.8K l·∫ßn t·∫°o</span>
            <span class="stat">‚ù§Ô∏è 4.9/5 ‚≠ê</span>
          </div>
        </div>

        <div class="trend-card">
          <div class="trend-rank">3</div>
          <div class="trend-image" style="background: linear-gradient(135deg, #ffd89b, #ff6b6b)"></div>
          <h3>Phim Ho·∫°t H√¨nh 3D</h3>
          <p>Style Disney/Pixar, nh√¢n v·∫≠t ho·∫°t h√¨nh si√™u chi ti·∫øt</p>
          <div class="trend-stats">
            <span class="stat">üë• 11.5K l·∫ßn t·∫°o</span>
            <span class="stat">‚ù§Ô∏è 4.7/5 ‚≠ê</span>
          </div>
        </div>

        <div class="trend-card">
          <div class="trend-rank">4</div>
          <div class="trend-image" style="background: linear-gradient(135deg, #c084fc, #a855f7)"></div>
          <h3>Fantasy Magic</h3>
          <p>Th·∫ø gi·ªõi ph√©p thu·∫≠t, r·ªìng, y√™u tinh v√† ph√©p l·∫°</p>
          <div class="trend-stats">
            <span class="stat">üë• 10.3K l·∫ßn t·∫°o</span>
            <span class="stat">‚ù§Ô∏è 4.6/5 ‚≠ê</span>
          </div>
        </div>

        <div class="trend-card">
          <div class="trend-rank">5</div>
          <div class="trend-image" style="background: linear-gradient(135deg, #fbbf24, #f97316)"></div>
          <h3>Retro Vintage</h3>
          <p>Phong c√°ch 70s, 80s retro, film c≈© v√† b·ªô m√°y quay vintage</p>
          <div class="trend-stats">
            <span class="stat">üë• 9.7K l·∫ßn t·∫°o</span>
            <span class="stat">‚ù§Ô∏è 4.5/5 ‚≠ê</span>
          </div>
        </div>

        <div class="trend-card">
          <div class="trend-rank">6</div>
          <div class="trend-image" style="background: linear-gradient(135deg, #ec4899, #d946ef)"></div>
          <h3>Pop Art Modern</h3>
          <p>Ngh·ªá thu·∫≠t hi·ªán ƒë·∫°i, Warhol style, m√†u s·∫Øc ƒë·∫≠p m·∫Øt</p>
          <div class="trend-stats">
            <span class="stat">üë• 8.9K l·∫ßn t·∫°o</span>
            <span class="stat">‚ù§Ô∏è 4.4/5 ‚≠ê</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Trend Statistics -->
    <section class="trend-stats-section">
      <div class="section-header">
        <h2>üìä Th·ªëng K√™ Xu H∆∞·ªõng</h2>
        <p>Ph√¢n t√≠ch chi ti·∫øt s·ª± ph√°t tri·ªÉn c·ªßa c√°c style ph·ªï bi·∫øn</p>
      </div>

      <div class="stats-container">
        <div class="stats-grid">
          <div class="chart-wrapper">
            <h3>Xu H∆∞·ªõng T·∫°o ·∫¢nh (7 ng√†y qua)</h3>
            <canvas id="trendsChart"></canvas>
          </div>

          <div class="chart-wrapper">
            <h3>Top Style ·∫¢nh</h3>
            <canvas id="styleChart"></canvas>
          </div>

          <div class="chart-wrapper">
            <h3>Th·ªùi Gian T·∫°o ·∫¢nh</h3>
            <canvas id="timeChart"></canvas>
          </div>

          <div class="chart-wrapper">
            <h3>ƒê·ªô H√†i L√≤ng Ng∆∞·ªùi D√πng</h3>
            <canvas id="satisfactionChart"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Weekly Highlights -->
    <section class="weekly-highlights">
      <div class="section-header">
        <h2>N·ªïi B·∫≠t C·ªßa Tu·∫ßn</h2>
        <p>Nh·ªØng t√°c ph·∫©m ·∫•n t∆∞·ª£ng nh·∫•t ƒë∆∞·ª£c t·∫°o ra tu·∫ßn n√†y</p>
      </div>

      <div class="highlights-grid">
        <div class="highlight-card">
          <div class="highlight-image" style="background: linear-gradient(135deg, #667eea, #764ba2)"></div>
          <div class="highlight-content">
            <span class="highlight-badge">ƒê·∫°o Di·ªÖn T√†i NƒÉng</span>
            <h3>Qu·ª≥nh - Cyberpunk Urban</h3>
            <p>B·ªô ·∫£nh Cyberpunk k·ªπ thu·∫≠t cao v·ªõi layout chuy√™n nghi·ªáp</p>
            <div class="highlight-meta">
              <span>T·∫°o h√¥m nay</span>
              <span>üëç 523 likes</span>
            </div>
          </div>
        </div>

        <div class="highlight-card">
          <div class="highlight-image" style="background: linear-gradient(135deg, #f093fb, #f5576c)"></div>
          <div class="highlight-content">
            <span class="highlight-badge">S√°ng T·∫°o ƒê·ªôt Ph√°</span>
            <h3>Minh - Fantasy Realm</h3>
            <p>
              Th·∫ø gi·ªõi fantasy v·ªõi chi ti·∫øt tuy·ªát v·ªùi v√† √°nh s√°ng chuy√™n
              nghi·ªáp
            </p>
            <div class="highlight-meta">
              <span>H√¥m qua</span>
              <span>üëç 892 likes</span>
            </div>
          </div>
        </div>

        <div class="highlight-card">
          <div class="highlight-image" style="background: linear-gradient(135deg, #4facfe, #00f2fe)"></div>
          <div class="highlight-content">
            <span class="highlight-badge">K·ªπ Thu·∫≠t Xu·∫•t S·∫Øc</span>
            <h3>Linh - Ocean Paradise</h3>
            <p>B·ªô ·∫£nh nhi·ªát ƒë·ªõi tuy·ªát ƒë·∫πp v·ªõi n∆∞·ªõc bi·ªÉn trong xanh</p>
            <div class="highlight-meta">
              <span>2 ng√†y tr∆∞·ªõc</span>
              <span>üëç 1.2K likes</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Style Categories -->
    <section class="style-categories">
      <div class="section-header">
        <h2>üé® Danh M·ª•c Style</h2>
        <p>Kh√°m ph√° t·∫•t c·∫£ c√°c lo·∫°i style ·∫£nh c√≥ s·∫µn</p>
      </div>

      <div class="categories-grid">
        <div class="category-item">
          <div class="category-icon">üë§</div>
          <h3>Portrait</h3>
          <p>Ch√¢n dung, b√°n th√¢n, ·∫£nh ng∆∞·ªùi</p>
          <span class="category-count">2,458 ·∫£nh</span>
        </div>

        <div class="category-item">
          <div class="category-icon">üåç</div>
          <h3>Landscape</h3>
          <p>Phong c·∫£nh, thi√™n nhi√™n, th√†nh ph·ªë</p>
          <span class="category-count">1,832 ·∫£nh</span>
        </div>

        <div class="category-item">
          <div class="category-icon">üéÆ</div>
          <h3>Fantasy</h3>
          <p>Ph√©p thu·∫≠t, r·ªìng, th·∫ø gi·ªõi th·∫ßn tho·∫°i</p>
          <span class="category-count">1,645 ·∫£nh</span>
        </div>

        <div class="category-item">
          <div class="category-icon">ü§ñ</div>
          <h3>Sci-Fi</h3>
          <p>Khoa h·ªçc vi·ªÖn t∆∞·ªüng, t∆∞∆°ng lai, c√¥ng ngh·ªá</p>
          <span class="category-count">1,523 ·∫£nh</span>
        </div>

        <div class="category-item">
          <div class="category-icon">üé≠</div>
          <h3>Art Style</h3>
          <p>Tranh s∆°n d·∫ßu, v·∫Ω tay, pop art</p>
          <span class="category-count">1,397 ·∫£nh</span>
        </div>

        <div class="category-item">
          <div class="category-icon">üé¨</div>
          <h3>Cinematic</h3>
          <p>Style phim ·∫£nh, ƒëi·ªán ·∫£nh chuy√™n nghi·ªáp</p>
          <span class="category-count">1,267 ·∫£nh</span>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="trends-cta">
      <h2>B·∫°n ƒê√£ S·∫µn S√†ng T·∫°o ·∫¢nh Theo Xu H∆∞·ªõng?</h2>
      <p>Th·ª≠ c√°c style m·ªõi nh·∫•t c·ªßa ch√∫ng t√¥i</p>
      <button class="btn-primary" onclick="window.location.href='/tao.html'">
        üé® B·∫Øt ƒê·∫ßu T·∫°o ·∫¢nh
      </button>
    </section>
  </div>

  <div id="footer"></div>

  <script src="/assets/js/auth-utils.js"></script>
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/floating-chat-loader.js"></script>
  <script>
    // API calls ƒë·ªÉ l·∫•y d·ªØ li·ªáu th·∫≠t
    const API_BASE = "/api/trends";

    // ƒê·ªãnh d·∫°ng s·ªë
    function formatNumber(num) {
      if (num >= 1000) {
        return (num / 1000).toFixed(1) + "K";
      }
      return num.toString();
    }

    // ƒê·ªãnh d·∫°ng th·ªùi gian
    function formatTimeAgo(date) {
      const now = new Date();
      const diffMs = now - new Date(date);
      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
      const diffDays = Math.floor(diffHours / 24);

      if (diffDays === 0) {
        if (diffHours === 0) return "V·ª´a xong";
        return `${diffHours} gi·ªù tr∆∞·ªõc`;
      } else if (diffDays === 1) {
        return "H√¥m qua";
      } else if (diffDays <= 7) {
        return `${diffDays} ng√†y tr∆∞·ªõc`;
      } else {
        return new Date(date).toLocaleDateString("vi-VN");
      }
    }

    // T·∫£i d·ªØ li·ªáu xu h∆∞·ªõng ph·ªï bi·∫øn
    async function loadPopularTrends() {
      console.log("üîÑ Loading popular trends...");
      try {
        const response = await fetch(`${API_BASE}/popular`);
        console.log("üì° API Response status:", response.status);

        if (!response.ok) throw new Error("Failed to load trends");

        const trends = await response.json();
        console.log("üìä Popular trends data:", trends);

        const trendsGrid = document.querySelector(".trends-grid");
        console.log("üéØ Trends grid element:", trendsGrid);

        // Clear existing mock data
        trendsGrid.innerHTML = "";

        trends.forEach((trend, index) => {
          const trendCard = document.createElement("div");
          trendCard.className = "trend-card";
          trendCard.innerHTML = `
              <div class="trend-rank">${index + 1}</div>
              <div class="trend-image" style="${trend.image
              ? `background-image: url('${trend.image}')`
              : `background: linear-gradient(135deg, #${Math.floor(
                Math.random() * 16777215
              ).toString(16)}, #${Math.floor(
                Math.random() * 16777215
              ).toString(16)})`
            }"></div>
              <h3>${trend.title}</h3>
              <p>${trend.description || "Style ·∫£nh ƒë·ªôc ƒë√°o v√† s√°ng t·∫°o"}</p>
              <div class="trend-stats">
                <span class="stat">üë• ${formatNumber(
              trend.usageCount || 0
            )} l·∫ßn t·∫°o</span>
                <span class="stat">‚ù§Ô∏è ${(trend.avgRating || 4.5).toFixed(
              1
            )}/5 ‚≠ê</span>
              </div>
            `;
          trendsGrid.appendChild(trendCard);
        });
      } catch (error) {
        console.error("Error loading popular trends:", error);
        // Gi·ªØ mock data n·∫øu API th·∫•t b·∫°i
      }
    }

    // T·∫£i d·ªØ li·ªáu th·ªëng k√™
    async function loadTrendsStats() {
      try {
        const response = await fetch(`${API_BASE}/stats`);
        if (!response.ok) throw new Error("Failed to load stats");

        const data = await response.json();

        // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì xu h∆∞·ªõng 7 ng√†y
        const ctx1 = document.getElementById("trendsChart").getContext("2d");
        new Chart(ctx1, {
          type: "line",
          data: {
            labels: [
              "Th·ª© 2",
              "Th·ª© 3",
              "Th·ª© 4",
              "Th·ª© 5",
              "Th·ª© 6",
              "Th·ª© 7",
              "Ch·ªß Nh·∫≠t",
            ],
            datasets: [
              {
                label: "L∆∞·ª£t T·∫°o ·∫¢nh",
                data: data.dailyStats || [450, 520, 480, 610, 750, 920, 890],
                borderColor: "#667eea",
                backgroundColor: "rgba(102, 126, 234, 0.1)",
                borderWidth: 3,
                tension: 0.4,
                fill: true,
                pointRadius: 5,
                pointBackgroundColor: "#667eea",
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: { legend: { display: false } },
            scales: { y: { beginAtZero: true } },
          },
        });

        // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì style popularity
        const ctx2 = document.getElementById("styleChart").getContext("2d");
        const styleLabels = data.styleStats?.map((s) => s.title || s._id) || [
          "Cyberpunk",
          "Thi√™n Nhi√™n",
          "Ho·∫°t H√¨nh",
          "Fantasy",
          "Retro",
          "Pop Art",
        ];
        const styleData = data.styleStats?.map((s) => s.usageCount) || [
          15.2, 12.8, 11.5, 10.3, 9.7, 8.9,
        ];
        new Chart(ctx2, {
          type: "doughnut",
          data: {
            labels: styleLabels,
            datasets: [
              {
                data: styleData,
                backgroundColor: [
                  "#ff6b6b",
                  "#4ecdc4",
                  "#ffd89b",
                  "#c084fc",
                  "#fbbf24",
                  "#ec4899",
                ],
              },
            ],
          },
          options: { responsive: true, maintainAspectRatio: true },
        });

        // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì th·ªùi gian x·ª≠ l√Ω
        const ctx3 = document.getElementById("timeChart").getContext("2d");
        new Chart(ctx3, {
          type: "bar",
          data: {
            labels: ["6h", "12h", "18h", "24h", "36h", "48h"],
            datasets: [
              {
                label: "Th·ªùi gian x·ª≠ l√Ω trung b√¨nh (gi√¢y)",
                data: [
                  Math.floor((data.timeStats?.minTime || 15) * 0.8),
                  Math.floor((data.timeStats?.avgTime || 25) * 0.8),
                  Math.floor((data.timeStats?.avgTime || 25) * 0.9),
                  Math.floor(data.timeStats?.avgTime || 25),
                  Math.floor((data.timeStats?.avgTime || 25) * 1.1),
                  Math.floor((data.timeStats?.maxTime || 30) * 0.9),
                ],
                backgroundColor: "#667eea",
              },
            ],
          },
          options: { responsive: true, maintainAspectRatio: true },
        });

        // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì ƒë·ªô h√†i l√≤ng
        const ctx4 = document
          .getElementById("satisfactionChart")
          .getContext("2d");
        new Chart(ctx4, {
          type: "radar",
          data: {
            labels: [
              "Ch·∫•t L∆∞·ª£ng",
              "T·ªëc ƒê·ªô",
              "Gi√° C·∫£",
              "Giao Di·ªán",
              "H·ªó Tr·ª£",
              "T√≠nh NƒÉng",
            ],
            datasets: [
              {
                label: "ƒê√°nh Gi√°",
                data: [
                  (data.satisfactionStats?.avgRating || 4.6) * 2,
                  (data.satisfactionStats?.avgRating || 4.6) * 1.9,
                  (data.satisfactionStats?.avgRating || 4.6) * 1.8,
                  (data.satisfactionStats?.avgRating || 4.6) * 1.95,
                  (data.satisfactionStats?.avgRating || 4.6) * 1.85,
                  (data.satisfactionStats?.avgRating || 4.6) * 1.9,
                ],
                borderColor: "#667eea",
                backgroundColor: "rgba(102, 126, 234, 0.1)",
                pointBackgroundColor: "#667eea",
              },
            ],
          },
          options: { responsive: true, maintainAspectRatio: true },
        });

        // C·∫≠p nh·∫≠t weekly highlights
        if (data.weeklyHighlights && data.weeklyHighlights.length > 0) {
          const highlightsGrid = document.querySelector(".highlights-grid");
          highlightsGrid.innerHTML = "";

          data.weeklyHighlights.forEach((highlight, index) => {
            const badges = [
              "ƒê·∫°o Di·ªÖn T√†i NƒÉng",
              "S√°ng T·∫°o ƒê·ªôt Ph√°",
              "K·ªπ Thu·∫≠t Xu·∫•t S·∫Øc",
            ];
            const highlightCard = document.createElement("div");
            highlightCard.className = "highlight-card";
            highlightCard.innerHTML = `
                <div class="highlight-image" style="${highlight.imageUrl
                ? `background-image: url('${highlight.imageUrl}')`
                : `background: linear-gradient(135deg, #${Math.floor(
                  Math.random() * 16777215
                ).toString(16)}, #${Math.floor(
                  Math.random() * 16777215
                ).toString(16)})`
              }"></div>
                <div class="highlight-content">
                  <span class="highlight-badge">${badges[index % badges.length]
              }</span>
                  <h3>${highlight.userName} - ${highlight.promptName}</h3>
                  <p>Style ${highlight.promptCategory
              } v·ªõi ch·∫•t l∆∞·ª£ng v∆∞·ª£t tr·ªôi</p>
                  <div class="highlight-meta">
                    <span>${formatTimeAgo(highlight.createdAt)}</span>
                    <span>üëç ${formatNumber(highlight.likes)} likes</span>
                  </div>
                </div>
              `;
            highlightsGrid.appendChild(highlightCard);
          });
        }

        // C·∫≠p nh·∫≠t category stats
        if (data.categoryStats) {
          const categoryElements =
            document.querySelectorAll(".category-count");
          const categories = [
            "portrait",
            "landscape",
            "fantasy",
            "scifi",
            "art",
            "cinematic",
          ];
          const categoryNames = [
            "portrait",
            "landscape",
            "fantasy",
            "scifi",
            "art style",
            "cinematic",
          ];

          categoryElements.forEach((element, index) => {
            const categoryKey = categories[index];
            const count =
              data.categoryStats[categoryKey] ||
              Math.floor(Math.random() * 2000) + 500;
            element.textContent = `${count.toLocaleString("vi-VN")} ·∫£nh`;
          });
        }
      } catch (error) {
        console.error("Error loading trends stats:", error);
        // Gi·ªØ mock data n·∫øu API th·∫•t b·∫°i
        initMockCharts();
      }
    }

    // Kh·ªüi t·∫°o bi·ªÉu ƒë·ªì mock data (fallback)
    function initMockCharts() {
      // Chart 1: Trends over 7 days
      const ctx1 = document.getElementById("trendsChart").getContext("2d");
      new Chart(ctx1, {
        type: "line",
        data: {
          labels: [
            "Th·ª© 2",
            "Th·ª© 3",
            "Th·ª© 4",
            "Th·ª© 5",
            "Th·ª© 6",
            "Th·ª© 7",
            "Ch·ªß Nh·∫≠t",
          ],
          datasets: [
            {
              label: "L∆∞·ª£t T·∫°o ·∫¢nh",
              data: [450, 520, 480, 610, 750, 920, 890],
              borderColor: "#667eea",
              backgroundColor: "rgba(102, 126, 234, 0.1)",
              borderWidth: 3,
              tension: 0.4,
              fill: true,
              pointRadius: 5,
              pointBackgroundColor: "#667eea",
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: { legend: { display: false } },
          scales: {
            y: { beginAtZero: true },
          },
        },
      });

      // Chart 2: Style popularity
      const ctx2 = document.getElementById("styleChart").getContext("2d");
      new Chart(ctx2, {
        type: "doughnut",
        data: {
          labels: [
            "Cyberpunk",
            "Thi√™n Nhi√™n",
            "Ho·∫°t H√¨nh",
            "Fantasy",
            "Retro",
            "Pop Art",
          ],
          datasets: [
            {
              data: [15.2, 12.8, 11.5, 10.3, 9.7, 8.9],
              backgroundColor: [
                "#ff6b6b",
                "#4ecdc4",
                "#ffd89b",
                "#c084fc",
                "#fbbf24",
                "#ec4899",
              ],
            },
          ],
        },
        options: { responsive: true, maintainAspectRatio: true },
      });

      // Chart 3: Creation time
      const ctx3 = document.getElementById("timeChart").getContext("2d");
      new Chart(ctx3, {
        type: "bar",
        data: {
          labels: ["6h", "12h", "18h", "24h", "36h", "48h"],
          datasets: [
            {
              label: "Th·ªùi gian x·ª≠ l√Ω trung b√¨nh (gi√¢y)",
              data: [15, 25, 20, 30, 28, 25],
              backgroundColor: "#667eea",
            },
          ],
        },
        options: { responsive: true, maintainAspectRatio: true },
      });

      // Chart 4: User satisfaction
      const ctx4 = document
        .getElementById("satisfactionChart")
        .getContext("2d");
      new Chart(ctx4, {
        type: "radar",
        data: {
          labels: [
            "Ch·∫•t L∆∞·ª£ng",
            "T·ªëc ƒê·ªô",
            "Gi√° C·∫£",
            "Giao Di·ªán",
            "H·ªó Tr·ª£",
            "T√≠nh NƒÉng",
          ],
          datasets: [
            {
              label: "ƒê√°nh Gi√°",
              data: [9.2, 8.8, 8.5, 9.1, 8.9, 9.0],
              borderColor: "#667eea",
              backgroundColor: "rgba(102, 126, 234, 0.1)",
              pointBackgroundColor: "#667eea",
            },
          ],
        },
        options: { responsive: true, maintainAspectRatio: true },
      });
    }

    // Th√™m loading states
    function showLoading() {
      const loadingElements = document.querySelectorAll(
        ".trends-grid, .highlights-grid, .stats-grid"
      );
      loadingElements.forEach((el) => {
        el.style.opacity = "0.5";
        el.style.pointerEvents = "none";
      });
    }

    function hideLoading() {
      const loadingElements = document.querySelectorAll(
        ".trends-grid, .highlights-grid, .stats-grid"
      );
      loadingElements.forEach((el) => {
        el.style.opacity = "1";
        el.style.pointerEvents = "auto";
      });
    }

    // Kh·ªüi t·∫°o khi DOM load xong
    document.addEventListener("DOMContentLoaded", async function () {
      showLoading();

      // T·∫£i d·ªØ li·ªáu th·∫≠t t·ª´ API
      await Promise.all([loadPopularTrends(), loadTrendsStats()]);

      hideLoading();
      document.body.appendChild(refreshBtn);
    });
  </script>
</body>

</html>